<!-- views/payoutList.ejs -->

<!-- Include DataTables CSS -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">

<!-- Include jQuery and DataTables JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payout List</title>
    <link rel="stylesheet" href="/public/style.css">
</head>
<body>
    <header>
        <ul>
          <li><a href="/users">Users</a></li>
          <li><a href="/bot-config">Bot Configurations</a></li>
          <li><a href="/daily-tasks">Daily Tasks</a></li>
          <li><a href="/transactions">Transactions</a></li>
        </ul>
        <ul>
          <li><a href="/logout">Logout</a></li>
        </ul>
    </header>
    <main>
    <h1>Payout List</h1>
    <table id="transactions">
        <thead>
            <tr>
                <th>Telegram ID</th>
                <th>Username</th>
                <th>Address</th>
                <th>Amount</th>
                <th>Status</th>
                <th>Error</th>
                <th>Created At</th>
            </tr>
        </thead>
        <tbody>
            <% payouts.forEach(payout => { %>
                <tr>
                    <td><%= payout.telegramid %></td>
                    <td><%= payout.telegramusername %></td>
                    <td><%= payout.address %></td>
                    <td><%= payout.amount %></td>
                    <td><%= payout.status ? 'Completed' : 'Pending' %></td>
                    <td><%= payout.error %></td>
                    <td><%= payout.createdAt.toLocaleDateString() %></td>
                </tr>
            <% }) %>
        </tbody>
    </table>
</main>
</body>
</html>
<script>
    $(document).ready(function() {
      $('#transactions').DataTable();
    });
  </script>